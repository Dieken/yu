<script setup>
import Chaifen from '@/chaifen/Chaifen.vue'
</script>

# 單字拆分

## 漢字拼圖

先前說過，拆字，就是把漢字按照一定的規則，拆成唯一的字根組合。這個過程如同拼圖一般，大多數時候，是非常直觀而自然的。

::: tip 例

<div class="flex justify-left flex-wrap">
<Chaifen char='糧' :parts='[6,4,1,7]' />
<Chaifen char='錘' :parts='[8,3,4,1]' />
<Chaifen char='錢' :parts='[8,4,4]' />
<Chaifen char='瓶' :parts='[3,3,4]' />
<Chaifen char='琴' :parts='[4, 4, 2, 1, 1]' />
<Chaifen char='鴿' :parts='[6, 11]' />
</div>
:::

這種將字拆成直觀的、分離的部件的方法，足以應付大部分漢字的拆分了。但在實際使用中，遇到這個問題：一個獨體字，本身不是字根，怎麼辦？這時候，我們要把它繼續拆成更小的字根甚至筆劃。

::: tip 例

`戋`這個字，我們可以繼續將它拆成`一`和`戈`。查字根圖可知，`一`和`戈`正好是兩個字根，拆字成功。  

`丸`這個字，我們可以繼續將它拆成`九`和`丶`。查字根圖可知，`九`和`丶`正好是兩個字根，拆字成功。  

`朱`這個字，我們可以繼續將它拆成`牛`和`八`。查字根圖可知，`牛`和`八`正好是兩個字根，拆字成功。  
<div class="flex justify-left flex-wrap">
<Chaifen char='戋' :parts='[1,4]' />
<Chaifen char='丸' :parts='[2,1]' />
<Chaifen char='朱' :parts='[4,2]' />
</div>
:::

有時候，獨體字的拆分不是很直觀。比如`再`可以拆成`一冂土`，也可以拆成`王冂`。遇到此類字時的拆分，往往需要一些經驗和練習。所以當你遇到不會拆的字時，應該主動查詢它的編碼，及時學習。

更麻煩的情況是，**一個字好像有幾種拆分方法**。

::: tip 例

`井`，可以拆`二{介下}`，也可以拆`一廾`。  
<div class="flex justify-left flex-wrap">
<Chaifen char='井' :parts='[1,3]' />
❓
<Chaifen char='井' :parts='[2,2]' />
❓
<Chaifen char='井' :parts='[3,1]' />
❓
</div>

`单`可以拆成`丷日十`也可以拆成`丷冂丰`。
<div class="flex justify-left flex-wrap">
<Chaifen char='单' :parts='[2,4,2]' />
❓
<Chaifen char='单' :parts='[2,2,1,1,2]' :colors='[1,2,3,2,3]' />
❓
<Chaifen char='单' :parts='[2,2,4]' />
❓
</div>

`主`可以拆成`丶王`也可以拆成`亠土`。  
<div class="flex justify-left flex-wrap">
<Chaifen char='主' :parts='[1,4]' />
❓
<Chaifen char='主' :parts='[2,3]' />
❓
<Chaifen char='主' :parts='[1,3,1]' :colors='[1,2,1]' />
❓
</div>
:::

這種一字多拆的情況，任何形碼中，都是希望避免的。因為一字多拆，會造成極大的不確定性，並造成編碼的混亂[^predecessor]。

宇浩輸入法總結了拆字規則，並且不斷自我審視每一個拆分是否符合規則。通過大量的努力，明確了一套優先級系統。使每一個漢字，都有唯一的拆分方案，消除了不確定性[^uncertanty]。

::: info 拆字優先級

「宇浩」拆字規則，按優先級排序如下：

1. 字根最少
1. 符合筆順
1. 結構完整
1. 散連交斷
1. 字根取大

以上優先級，還可以高度歸納為：**少順整散連交斷大**。
:::

取根時，如果有多種不同的拆分方式，則按**優先級從高到低**依次檢查以上規則，選取符合條件的，排除不滿足的，最終得到唯一的拆分方案。因此，某種意義上來說，宇浩輸入法的拆分規則，其實是一種「比較和淘汰」的排除法，後文中會展示這些步驟的機器實現。

以下為拆分規則詳細介紹[^intrinstic]：

## 字根最少

字根最少，意思是拆分一個字時，應該使得字根的數量最少。保證字根數量最少，是第一優先級最高的規則。

::: tip 例

`国`如果完全符合筆順，應該拆成`冂王丶一`，是四個字根。但拆成`囗王丶`，只用三個字根就夠了。因為「少」優先級高於「順」，所以應該拆成`囗王丶`。
<div class="flex justify-left flex-wrap">
<Chaifen char='国' :parts='[2,4,1,1]' :colors='[1,2,3,1]' />
✅
<Chaifen char='国' :parts='[2,4,1,1]' />
❌
</div>

`國`如果完全符合筆順，應該拆成`冂一口一丿丶一`，是七個字根。但拆成`囗戈口一`，只用四個字根就夠了。因為「少」優先級高於「順」，所以應該拆成`囗戈口一`。
<div class="flex justify-left flex-wrap">
<Chaifen char='國' :parts='[2,1,3,1, 3, 1]' :colors='[1,2,3,4,2,1]' />
✅
<Chaifen char='國' :parts='[2,1,3,1,1,1,1,1]' />
❌
</div>

:::

## 符合筆順

符合筆順，指的是拆分的時候，按筆順依次寫下的兩個及以上的筆畫，應當儘量位於同一個字根中。

注意到，爲了使字根數量少，某些大於等於兩劃的字根，它的筆劃可能會被另一個或多個字根穿插。我們要使得不被穿插的字根數量更多、筆劃更多[^order]。

符合筆順的優先級低於字根最少。

::: tip 例

`来`可以拆成`一米`也可以拆成`未丷`，都是兩根，但拆成`一米`完全符合筆順。
<div class="flex justify-left flex-wrap">
<Chaifen char='来' :parts='[1,6]' />
✅
<Chaifen char='来' :parts='[1,2,4]' :colors='[1,2,1]' />
❌
</div>

`聿`可以拆成`彐キ`也可以拆成`肀二`，都是兩根，但拆成`彐キ`完全符合筆順。
<div class="flex justify-left flex-wrap">
<Chaifen char='聿' :parts='[3,3]' />
✅
<Chaifen char='聿' :parts='[3,2,1]' :colors='[1,2,1]' />
❌
</div>

`匹`拆`兀乚`而不拆`匚儿`，因為前者完全符合筆順。
<div class="flex justify-left flex-wrap">
<Chaifen char='匹' :parts='[3,1]' />
✅
<Chaifen char='匹' :parts='[1,2,1]' :colors='[1,2,1]' />
❌
</div>

`曲`拆`冂𠀎`而不拆`日卄`，因爲前者完全符合筆順。
<div class="flex justify-left flex-wrap">
<Chaifen char='曲' :parts='[2,4]' />
✅
<Chaifen char='曲' :parts='[2,3,1]' :colors='[1,2,1]' />
❌
</div>
:::

## 結構完整

結構完整，指的是`囗日目勹冂匚コ凵`等存在全包圍和半包圍結構的字根不拆散。

這個原則的設置，是為了不過分破壞漢字的整體性和直觀性。

::: tip 例

`昜`拆`日一勹彡`不拆`日丆𠃌彡`。
<div class="flex justify-left flex-wrap">
<Chaifen char='昜' :parts='[4,1,2,2]' />
✅
<Chaifen char='昜' :parts='[4,2,1,2]' />
❌
</div>

`单`可以拆成`丷日十`也可以拆成`丷冂丰`。兩者都是三根，都完全「符合筆順」。因為包圍結構不拆散，故而`单`拆成`丷日十`。
<div class="flex justify-left flex-wrap">
<Chaifen char='单' :parts='[2,4,2]' />
✅
<Chaifen char='单' :parts='[2,2,4]' />
❌
</div>

`免`可以拆成`⺈口儿`也可以拆成`⺈冂尢`。兩者都是三根，都完全「符合筆順」。因為包圍結構不拆散，故而`免`拆成`⺈口儿`。
<div class="flex justify-left flex-wrap">
<Chaifen char='免' :parts='[2,3,2]' />
✅
<Chaifen char='免' :parts='[2,2,3]' />
❌
</div>

`万`拆成`一勹`而非`{一丿}乛`。因為前者不僅完全符合筆順，同時也保持了結構完整。
<div class="flex justify-left flex-wrap">
<Chaifen char='万' :parts='[1,2]' />
✅
<Chaifen char='万' :parts='[1,1,1]' :colors='[1,2,1]' />
❌
</div>
:::

## 散連交斷

**散·連·交·斷**，是漢字部首或筆畫的四種狀態。

- 字根離散，指的是兩個字根互相分離。比如`部`中的`立口阝`，便是三個分離的字根。
- 字根相連，指的是兩個字根互相連接。比如`美`拆為`𦍌大`，這兩個字根是相連的。
- 字根相交，指的是兩個字根互相交叉。比如`再`拆成`一冂土`三個字根，便是相交的。
- 筆劃斷開，指的是一個筆劃（橫或豎）斷開。比如`我`拆成`丿扌戈`三個字根，其中的`扌`和`戈`兩根的橫本是一筆寫成，但我們將橫畫斷開。

「散連交斷」，優先級依次下降，但都排在「字根最少」「符合筆順」「結構完整」之後。

### 能散不連

::: tip 例
`主`可以拆成`丶王`也可以拆成`亠土`。觀察到，`丶王`是散開的，而`亠土`是相連的，後者符合「能散不連」。  
<div class="flex justify-left flex-wrap">
<Chaifen char='主' :parts='[1,4]' />
✅
<Chaifen char='主' :parts='[2,3]' />
❌
</div>
:::

### 能連不交

::: tip 例
`开`可以拆成`一廾`也可以拆成`二{介下}`。觀察到，第一種拆法字根相連，第二種拆法字根相交。故而拆成`一廾`符合「能連不交」。 
<div class="flex justify-left flex-wrap">
<Chaifen char='开' :parts='[1,3]' />
✅
<Chaifen char='开' :parts='[2,2]' />
❌
</div>
:::

### 能交不斷

::: tip 例
`果`拆作`日木`，不拆成`田木`或`甲木`，這是因為後者將中間的豎斷開了。因為「字根相交」的優先級高於「筆畫斷開」，`果`應當拆成`日木`。  
<div class="flex justify-left flex-wrap">
<Chaifen char='果' :parts='[4,4]' />
✅
<Chaifen char='果' :parts='[4,1,1,2]' :colors='[1,2,0,2]' />
❌
</div>
:::

### 根少而斷

::: tip 例
`我`拆作`丿扌戈`，不拆成`丿扌乚丿丶`。雖然前者將中間的橫斷開了，但因為「字根最少」的優先級大於「筆畫斷開」，我們選擇只有三根的`丿扌戈`。
<div class="flex justify-left flex-wrap">
<Chaifen char='我' :parts='[1,1,2,3]' :colors='[1,0,2,3,5,1]' />
✅
<Chaifen char='我' :parts='[1,3,1,1,1]' />
❌
</div>

`熏`拆作`千黑`，不拆成`千囗丷二灬`。雖然前者將中間的豎斷開了，但因為「字根最少」的優先級大於「筆畫斷開」，我們選擇只有兩根的`千黑`。  
<div class="flex justify-left flex-wrap">
<Chaifen char='熏' :parts='[2,5,1,6]' :colors='[1,2,0,2,3,5,1]' />
✅
<Chaifen char='熏' :parts='[2,2,2,1,1,2,4]' :colors='[1,2,3,2,1,4,5]' />
❌
</div>
:::

::: danger 注意

可以斷開的筆畫必須是橫或豎。撇、捺、折不可斷開。故而`专`不拆`キマ`。
<div class="flex justify-left flex-wrap">
<Chaifen char='专' :parts='[2,1,1]' />
✅
<Chaifen char='专' :parts='[2,1,1]' :colors='[1,0,2]' />
❌
</div>
:::

## 字根取大

字根取大，指的是按照筆順拆字時：

<!-- - 当某种拆分不完全符合笔顺时，应当让符合笔顺的字根尽可能地大。也就是做到「局部合笔顺最大化」。 -->
- 讓非「豎·撇變形部分」儘可能地大。
- 讓首筆靠前的字根儘可能地大。

<!-- 第一条的存在，是为了防止笔画过于交织而导致拆分方案不直观。

::: tip 例
這裡以`妻`字舉例，`妻`可以拆分為`十彐女` `キコ女`甚至`龶乛女`。我們按順序檢查規則，發現：

- 三者都是三根，都不完全符合筆順，都存在相交。
- 我們最後檢查「字根取大」規則。我們發現，前兩個字根是穿插書寫的。`キコ女`的拆法中，前兩根交替三次寫成。`十彐女` `龶乛女`，前兩根只交替兩次寫成，故而`キコ女`淘汰。
- `十彐女`中，完全合筆順的字根`彐`寫了三筆。而`龶乛女`中，完全合筆順的字根`乛`只有一筆。
- `十彐女`勝出。
- 注：`キコ女`和`龶乛女`拆分還同時觸發了[「橫間不穿心」禁手](./advanced)。
<div class="flex justify-left flex-wrap">
<Chaifen char='妻' :parts='[1,3,1,3]' :colors='[1,2,1,3]' />
✅
<Chaifen char='妻' :parts='[1,1,1,1,1,3]' :colors='[1,2,1,2,1,3]' />
❌
<Chaifen char='妻' :parts='[1,1,3,3]' :colors='[1,2,1,3]' />
❌
</div>
::: -->

### 非變形部分取大

部分字根在做偏旁的時候，由於書法的考慮，會有「豎變撇」「撇變豎」的變化。它們稱為「豎·撇變形根」。

::: info 豎·撇變形根
`千`字根的`丨`變成`丿`

`干`字根的`丨`變成`丿`

`キ`字根的`丨`變成`丿`

`丰`字根的`丨`變成`丿`

`羊`字根的`丨`變成`丿`

`丌`字根的`丿`變成`丨`
:::

我們應當對非變形部分取大。

::: tip 例
`失`拆`丿夫`而不拆`牛乀`，因為`牛`的一豎是撇。故而對`夫`取大。
<div class="flex justify-left flex-wrap">
<Chaifen char='失' :parts='[1,4]' />
✅
<Chaifen char='失' :parts='[4,1]' :colors='[1,2]' />
❌
</div>

`井`拆`二{介下}`而不拆`キ丨`，因為`キ`的一豎是撇。故而對`{介下}`取大。
<div class="flex justify-left flex-wrap">
<Chaifen char='井' :parts='[2,2]' />
✅
<Chaifen char='井' :parts='[3,1]' />
❌
</div>

`严`拆為`一业丿`，而不拆成`丌丷厂`，因為後者中，`丌`字根的`丿`變成`丨`。為了讓非「豎·撇變形根」儘可能地大，我們取`业`根。

另外一種拆法`丌䒑丿`不取的原因是`䒑`字根中的點應當和豎相連（艹字頭的行書寫法），而`严`字中兩點分散了。這違反了[字根的內在屬性](./advanced)。
<div class="flex justify-left flex-wrap">
<Chaifen char='严' :parts='[1,5,1]' />
✅
<Chaifen char='严' :parts='[3,2,2]' />
❌
<Chaifen char='严' :parts='[3,3,1]' />
❌
</div>

`缓`拆`纟爪干又`而不拆`纟爪二夂`。雖然前者`干`的豎是撇，但後者出現了「字根相交」。根據規則優先級，「字根相交」低於「字根相連」，故而拆為`纟爪干又`。

<div class="flex justify-left flex-wrap">
<Chaifen char='缓' :parts='[3, 4, 3, 2]' />
✅
<Chaifen char='缓' :parts='[3, 4, 2, 3]' />
❌
</div>
:::

### 向前取大

向前取大，讓首筆靠前的字根的筆劃數儘量地多。這是一個兜底原則，可以保證最終只有一個候選方案能夠勝出。因此，它的優先級必然是所有拆字規則中最低的。

::: tip 例
`夬`拆為`ユ人`，而不拆成`乛大`，因為「字根取大」原則。讓首筆靠前的字根的筆劃數儘量地多，這裡，`ユ`的筆畫數大於`乛`。
<div class="flex justify-left flex-wrap">
<Chaifen char='夬' :parts='[2,2]' />
✅
<Chaifen char='夬' :parts='[1,3]' />
❌
</div>

`丈`拆為`𠂇丶`，而不拆成`一乂`，因為「字根取大」原則。讓首筆靠前的字根的筆劃數儘量地多，這裡，`𠂇`的筆畫數大於`一`。
<div class="flex justify-left flex-wrap">
<Chaifen char='丈' :parts='[2,1]' />
✅
<Chaifen char='丈' :parts='[1,2]' />
❌
</div>
:::

## 拆字舉例

::: info 更多例字
想要了解更多具有代表性的例字在宇碼中的拆分，請參見[字海拾珍——必拆字舉隅](./examples)。

如果你想了解使用頻率最為靠前的幾百個漢字在宇碼中的拆分，可以點擊進入[高頻字拆分圖解（簡化字）](./frequent.md)或[高頻字拆分圖解（傳統字）](./frequent_tc.md)頁面。
:::

實際拆字時，如果你感覺拆分方法不唯一，那麼可以用以下方法找到最優解：

- 列出所有可能的候選拆分方案。
- 依照「少順整散連交斷大」的規則順序，依次比較各個候選拆分。
- 如果所有的候選拆分都不滿足本條規則，則進入下條規則。
- 如果部分的候選拆分滿足本條規則，則該部分的候選拆分方案進入下條規則。
- 直到只有一個候選拆分方案勝出。

以下通過部分例字來說明拆分規則：

::: tip 例

1. 一例：`亷`。候選拆分`亠丷厂彐〢八`和`立丿彐〢八`。
   - `亠丷厂彐〢八`六根，`立丿彐〢八`五根。後者字根最少，直接勝出。
2. 又一例：`重`。候選拆分`丿車一`和`千里`。
   - `千里`是兩根，滿足「字根最少」，直接雖然中間一豎斷開，但依然勝出。
3. 又一例：`盡`。候選拆分`コ土灬皿` `乛龶灬皿` `彐丄灬皿` `{聿上}一灬皿`四種。
   - 都是四根，同時滿足「字根最少」。
   - `コ土灬皿`不符合筆順，其他三者都完全符合筆順。淘汰`コ土灬皿`。
   - 上半部分都出現字根相交情況。
   - 都不適用「結構合理」。
   - 進入兜底規則「字根取大」。根據規則，只要其中某個字根多寫一筆仍然符合筆順，就多寫一筆。觀察到，`{聿上}一灬皿`的第一根一共寫了四筆，故而勝出。
   <div class="flex justify-left flex-wrap">
   <Chaifen char='盡' :parts='[4,1,4,5]' />
   ✅
   <Chaifen char='盡' :parts='[3,2,4,5]' />
   ❌
   </div>
4. 又一例：`曱` yuē `甴` yóu。
   - `曱`按笔顺取大，故而是`日丨`。
   - `甴`，候选拆分为`日丨` `囗丄`。两者都是两根。因为先写竖，再写中间的一横，为了让不被穿插的部件尽可能地大，我们取`丄`。最后`囗丄`胜出。
   <div class="flex justify-left flex-wrap">
   <Chaifen char='曱' :parts='[4,1]' />
   ✅
   <Chaifen char='甴' :parts='[2,2,1]' :colors='[1,2,1]' />
   ✅
   </div>
:::

上面的例子邏輯雖比較複雜，但是最終的結果還是非常直觀的。在宇浩輸入法中，大多數的時候，直觀的拆分方法往往也是符合規則的。

[^predecessor]: 前輩輸入法的拆字規則，一般都有諸如「直觀」、「符合筆順」、「取大」等設置。但是優先級往往不夠明確，很多拆分方法並不符合規則，存在不少特例。在常用字範圍內，還可以通過大量練習來完成記憶，但到了大字集，規則不明確、規則相矛盾，都是造成檢字困難的因素。

[^uncertanty]: 當然，漢字不是完全可以量化的，不同字形下，也會出現不同的拆分可能。除了良好的定義外，有時候比例原則也很重要。尤其在大字集上，追求單一拆分方法會扭曲漢字直觀性，不能兼顧不同字形，讓使用者需要大量嘗試才能找到想要的字，這違背了大字集檢字的初衷。因此，對於大字集，也會設置兼容拆分和容錯碼。

[^intrinstic]: 在進行拆分前，首先需要「確認」某個字根到底存不存在，是否合規，也就是檢查字根的「內在屬性」。比如`土` `士`，兩橫的長度直接決定了字根的異同。其次需要檢查一些「拆分禁手」，比如`王`中間如果被筆畫「穿心」，這是不被允許的。禁手有：散件不分割、豎向不包夾、橫間不穿心。對這兩點的討論作為進階內容，於此處跳過。若有興趣，可以在後續章節 《進階討論》中閱讀。

[^order]: 為什麼要有完全合筆順這個規則，而且優先級那麼高？在我的認知中，形碼的基本出發點就是如同寫字一樣輸入一系列筆畫，即「五筆畫輸入法」。它是最自然，最直觀的，所以宇碼規則有了「符合筆順」。但是，輸入講求效率，必須把一些筆畫合併起來形成字根，它們的筆順可能會相互穿插，所以要有「根少優先」這個規則，把它的優先級放在了「符合筆順」的前面。最後，需要有個兜底條款「向前取大」來保證沒有拆分歧義。因此，形碼拆分有了「根少」「筆順」「取大」，其實已經足夠了。接下來的其他規則都是在這上面打補丁，為了讓拆分更加「直觀」。
