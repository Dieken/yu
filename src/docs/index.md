# 宇浩输入法

## 基本特点

宇浩输入法是纯字形输入法，通过输入汉字的部首和笔画来输入汉字，而不依赖汉字的具体读音。也就是「会写就会打」「看到即输入」。这是如何做到的呢？答案是三个步骤：

- 第一步，也是宇浩输入法的核心：将每一个汉字拆成不超过四个部件（字根）。
- 第二步，是将这些部件转换成对应的英文字母。
- 第三步，将编码输入到电脑中，对应的汉字就会自动弹出来。

举个例子，`韻`这个字用宇浩输入法怎么输入呢？

- 第一步：将`韻`直观地拆成四个部件：`立` `日` `口` `貝`。
- 第二步：找到这四个部件对应的字母，分别是：K J W I。
- 第三步：将这四个字母输入到电脑中，`韻`这个字就会显示出来。

<svg style="width: 75px; height: 75px; margin-right: 5px;"><g transform="translate(0, 65.91796875) scale(0.0732421875, -0.0732421875)"><path d="M 327 768 Q 355 749 386 725 Q 401 715 415 717 Q 425 718 429 732 Q 432 747 420 774 Q 407 801 316 813 Q 301 814 296 811 Q 292 807 294 795 Q 298 785 327 768 Z" style="fill: rgb(174, 1, 1);"></path><path d="M 399 625 Q 411 629 425 632 Q 468 642 475 649 Q 482 656 479 663 Q 472 672 449 677 Q 425 681 354 655 Q 264 628 166 614 Q 138 610 158 596 Q 194 577 237 588 Q 298 603 366 618 L 399 625 Z" style="fill: rgb(174, 1, 1);"></path><path d="M 210 528 Q 229 489 250 477 Q 260 473 268 481 Q 275 490 275 502 Q 272 529 237 548 Q 210 558 206 558 Q 202 558 201 548 Q 201 541 210 528 Z" style="fill: rgb(174, 1, 1);"></path><path d="M 373 481 Q 374 484 377 487 Q 393 512 409 542 Q 416 555 430 573 Q 443 583 435 593 Q 426 608 399 625 C 374 641 354 645 366 618 Q 366 617 368 614 Q 377 587 343 488 Q 339 481 337 472 C 329 443 357 455 373 481 Z" style="fill: rgb(174, 1, 1);"></path><path d="M 337 472 Q 145 427 60 417 Q 48 416 45 408 Q 42 398 57 387 Q 96 363 133 375 Q 290 432 474 460 Q 490 463 490 470 Q 491 482 474 490 Q 443 502 373 481 L 337 472 Z" style="fill: rgb(174, 1, 1);"></path><path d="M 198 324 Q 182 337 163 343 Q 157 346 153 342 Q 146 338 152 327 Q 180 261 172 114 Q 169 51 200 30 Q 213 24 218 51 Q 219 69 219 89 L 216 116 Q 216 156 216 197 L 216 221 Q 216 258 219 289 Q 220 295 219 299 L 198 324 Z" style="fill: rgb(255, 189, 5);"></path><path d="M 348 104 Q 364 79 377 49 Q 387 30 396 28 Q 406 28 415 49 Q 425 82 427 169 Q 420 281 429 313 Q 436 332 426 340 Q 419 350 387 365 Q 371 372 337 360 Q 285 342 198 324 C 169 318 190 290 219 299 Q 277 318 341 328 Q 360 331 365 324 Q 374 315 370 186 Q 371 140 366 131 Q 362 122 352 125 C 338 120 338 120 348 104 Z" style="fill: rgb(255, 189, 5);"></path><path d="M 216 197 Q 276 206 321 212 Q 340 215 333 226 Q 324 238 303 241 Q 272 244 216 221 C 188 210 186 193 216 197 Z" style="fill: rgb(255, 189, 5);"></path><path d="M 219 89 Q 226 88 237 90 Q 271 99 348 104 C 376 106 375 106 352 125 Q 345 131 334 138 Q 319 145 293 137 Q 250 125 216 116 C 187 108 189 91 219 89 Z" style="fill: rgb(255, 189, 5);"></path><path d="M 587 759 Q 577 763 562 763 Q 552 764 548 760 Q 544 754 552 741 Q 577 696 598 622 Q 602 600 617 585 Q 633 567 638 581 Q 641 591 639 609 L 633 636 Q 617 709 613 732 C 609 752 609 752 587 759 Z" style="fill: rgb(44, 150, 255);"></path><path d="M 827 664 Q 851 728 880 746 Q 896 762 883 779 Q 867 792 820 814 Q 805 821 729 792 Q 671 774 587 759 C 557 754 584 726 613 732 Q 620 733 770 770 Q 788 774 796 768 Q 805 758 779 670 C 771 641 816 636 827 664 Z" style="fill: rgb(44, 150, 255);"></path><path d="M 639 609 Q 646 608 657 610 Q 712 623 834 638 Q 843 639 844 646 Q 844 652 827 664 L 779 670 L 777 670 Q 698 648 633 636 C 604 630 609 610 639 609 Z" style="fill: rgb(44, 150, 255);"></path><path d="M 571 515 Q 549 525 534 524 Q 522 520 528 509 Q 570 425 542 264 Q 524 201 525 198 Q 525 177 545 151 Q 551 139 560 145 Q 569 152 577 174 L 585 206 Q 589 237 590 282 L 590 307 Q 590 353 590 386 L 590 411 Q 591 463 593 480 Q 593 484 593 487 C 594 506 594 506 571 515 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 814 195 Q 815 186 823 176 Q 836 149 846 150 Q 859 151 874 184 Q 887 209 886 229 Q 873 308 871 434 Q 870 471 889 502 Q 899 518 891 527 Q 864 549 818 568 Q 802 572 780 564 Q 699 528 571 515 C 541 512 563 483 593 487 Q 599 487 606 488 Q 700 513 768 525 Q 792 529 800 517 Q 815 499 816 435 Q 823 263 816 223 L 814 195 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 590 386 Q 594 385 604 386 Q 689 399 751 405 Q 773 409 765 421 Q 755 434 731 440 Q 706 443 590 411 C 561 403 560 389 590 386 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 590 282 Q 596 281 605 282 Q 690 295 754 301 Q 776 305 769 317 Q 759 330 735 336 Q 707 339 590 307 C 561 299 560 284 590 282 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 577 174 Q 586 173 596 174 Q 665 187 814 195 C 844 197 839 204 816 223 Q 812 227 804 232 Q 789 241 760 235 Q 663 216 585 206 C 555 202 547 176 577 174 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 586 121 Q 576 63 425 -52 Q 404 -65 431 -64 Q 492 -64 608 40 Q 609 43 655 84 Q 665 94 664 104 Q 663 117 637 126 Q 609 138 597 135 Q 590 134 586 121 Z" style="fill: rgb(125, 218, 88);"></path><path d="M 754 108 Q 800 53 857 -25 Q 870 -47 884 -52 Q 893 -55 901 -46 Q 914 -34 908 10 Q 901 62 758 138 Q 751 145 747 133 Q 744 120 754 108 Z" style="fill: rgb(125, 218, 88);"></path></g></svg>

宇浩输入法具有以下的优点：

- 字频加权后的选重率极低，基本上一字一码，码到字出，极其适合盲打。
- 繁简字码位分离，比如<简><簡>不同编碼，繁体简体混在一起打也极少选重。
- 字形兼容大陆通规、[大陆古籍通规](/docs/guji)[^guji_standards]、臺灣正體、香港繁体四套標準，方便检字。
- 设有简体、繁体两套词库，字形涵盖两岸三地三套标准 [^opencc]。
- 全面覆盖 CJK 全字集 99000 多个汉字（更新至 CJK 扩 I 区），生僻字一网打尽。
- 检字方便，翻页少。总共 99000 多个汉字，候选项最多的码位上只有 18 个候选字。
- 采用大字根、拆法直观，不会将汉字拆得零碎。
- 字根为双编码，不分主副根，没有结构码。
- 拆分时取一、二、三、末字根。全简编码一致、字词编码一致。
- 拆字规范，规则优先级明确，兼顾「逻辑性」和「直观性」。追求一字一拆、无歧义。
- 兼顾手感，大码只使用 25 键。星陳方案双手互击率超过 60%。

::: info 四大特点
**繁简通打　动静低重　字根聚类　兼顾手感**
:::

### 繁简通打

绝大多数输入法，简体字和对应的繁体字都占用相同的码位，导致输入繁体时需要选重。比如五笔字型中，`簡` `简`两个字的编码都是`TUJf`。如果我想打繁体的「簡」，需要按一下选重键。因此，大多数输入法在繁体文本或繁简混合文本下，不具备盲打的优势。

宇浩输入法繁简汉字分离，不存在共用码位现象，故而繁简混合文本也不需要选重。你可以按照自己的喜好随时切换繁简状态，不需要软件转换，更不需要担心因为繁体字位于简体字的下方而需要选重。可以像写字一样随心切换任何字形。

比如，`简` `簡` 这两个繁简汉字，在宇浩输入法中对应了不同的编码。这是因为宇浩输入法的`门` `門`字根繁简分离。在很多输入法中，由于繁简字根位于同一个按键，你需要从候选栏中选择繁体字还是简体字。

以下视频展示了使用宇浩单字全码输入**繁简混合**版本的《洛神赋》的片段节选。可以看到，全文都没有进行过选重。因此，宇浩输入法特别适合任意文本空间下的盲打，以及古汉语输入。

<video src='/yuhao-example.mp4' loop controls muted/>

### 动静低重

宇浩输入法支持繁简通打，并不代表它牺牲了**只打简体**或**只打繁体**的性能。我们不妨看一看下面的数据：

- 简体文本：常用 1500 字全码无重 [^frequent_characters]。常用 3000 字，全码 10 组重码，出简后无重码。常用 4500 字，全码 55 组重码，出简后 2 组重码。**常用 6000 字，全码 117 组重码，出简后 14 组重码。字频加权后，全码下每万字选重 5 次。**

- 繁体文本：常用 1500 字，全码 1 组重码，出简后无重。常用 3000 字，全码 24 组重码，出简后 4 组重码。常用 4500 字，全码 92 组重码，出简后 13 组重码。常用 5700 字，全码 152 组重码，出简后 36 组重码。字频加权后，全码下每万字选重 15 次。

- 繁简混合文本 [^mixed_frequency]：前 1500 字，全码 3 组重码，出简后无重。前 3000 字，全码 13 组重码，出简后 3 组重码。前 6000 字，全码 131 组重码，出简后 16 组重码。前 9000 字，全码 365 组重码，出简后 92 组重码。字频加权后，全码下每万字选重 17 次。

要知道，宇浩输入法只使用了 25 个按键，也就是说四码的编码空间只有其他 26 键输入法的 85.5%。但是宇浩输入法在常用繁简汉字下选重率却是同类输入法中最低的。

### 均衡优异

**繁简通打、动静低重、字根聚类、兼顾手感**，这是宇浩输入法的四个基本设计原则，目的在于避免机器学习中的「过拟合问题」，防止输入法被局限于特定的文本空间和字形状态，以期获得更大的适用性。在保证这四个原则的基础上，作者还采用了其他的客观指标作为算法的约束条件，以提高输入法的整体素质，防止有严重的短板产生。做到「整体性能均衡，部分指标优异」。总结如下：

- 单字重码表现优异，无论是全码还是简码，在简化字静重、简化字动重、繁体字动重、繁简混合动重方面都是最低。繁体字和大字集静重仅次于徐码。
- 双手互击表现突出，在字根分区的限制下，各连续文本双手互击率仅次于蓝宝石。
- 键位效率表现突出，没有使用 Z 键，不仅保证了一定的手感，还确保了输入平台的兼容性。
- 字形兼容表现优异，涵盖两岸三地四大标准字形（大陆简体、大陆繁体、台湾正体、香港繁体），词库也兼容了四套标准。真正做到打简体出简，打繁出繁。

<!-- ## 适合人群

评价一款输入法，不能只看重码率，因为每一款输入法都有自己的**设计哲学**和**目标用户**。有优点就必然有缺点，反之亦然。评价一款输入法的维度，除却重码率，还有规则简易度、字根复杂度、按键舒适度、平台通用性等。这就是为什么拼音重码高，但大多数人还是会使用拼音，因为它的学习成本基本为零。选择学习输入法，一定要符合自己的需求，要综合考虑多方面因素，例如，是否愿意背较多的字根，是否有打古文、繁体字需求等。

宇浩输入法的最佳输入体验，是采用精简词库（80000 词左右，同时包括简体、台湾繁体、香港繁体、大陆繁体）并配合单字输入，从而达到极致的确定性，做到完全关闭候选框输入。以下为宇浩输入法**最适合**的人群：

- 对繁体字和简化字都有输入需求，希望做到繁简无缝切换，不依赖程序进行转换的人（中文系学生、经常同两岸三地人士打交道者、方言爱好者、汉字爱好者等）；或
- 日常主要输入繁体文本的人（港澳台用户）；或
- 日常需要输入简体文本，偶尔需要输入繁体文本和生僻字的人；或
- 热爱汉字，喜欢一笔一画写字的感觉，想要学习传统汉字的人。 -->

## 聚类和分区

宇浩输入法的核心是对于汉字的拆分，其次是对于字根排布的设计。字根一共有 200 多个，但字母只有 26 个，因此，每个按键上都会有大约 10 个左右的字根。字根如何排布，直接决定了它的学习难度、维护难度、手感、连贯度等等。大体上：

- 对相似字形进行聚类和分区的方案，比乱序排布的方案，学习更加便捷，维护成本更低。比如：「目且貝見」这些都有「目」形的字根，如果安排在一个按键上，那么我们只要记住了其中的一个，就能立刻记住剩下的字根。
- 乱序排布的方案，比对相似字形进行聚类和分区的方案，手感更优。这是因为字根排布的设计中，最大的限制条件就是聚类。解除了这个限制，排布就更加自由，就能在手感上做到更好。
- 三码的方案，比四码的方案，思维负担更小。这是因为四码方案需要取到字的第三根，这个字根往往深入字的中部，思考起来需要更多时间。
- 四码的方案，比三码的方案，重码更低。这一点不言而喻。

每个人都有自己的偏好。为了照顾不同人群的需求。宇浩输入法有两套**官方字根排布设计**。大家可根据自己的偏好和以前的输入习惯，选择其中一个学习。由于这些设计都基于「宇浩拆分」，因此就算后面想试试其他的设计，也只用几天就能适应。

### 宇浩·星陳

**宇浩·星陳**是官方字根排布设计，采用了字根聚类同键排布模式（类似郑码、徐码）。字形相似的字根会被聚拢在一道，排布在 25 个键位上。方案名取自《尚書大傳》之「明明上天，爛然星陳」。

由于大量字形相近的字根被放在了一个按键上，它对于初学者极为友好，可以通过联想记忆法，以「组」为单位来记忆。比如：

- `目且貝見`和`日曰早`都在 J 上。
- `亦文（夂）亥（豕）亡方`都在 T 上。

![yustar](/yustar.png)

### 宇浩·光華

**宇浩·光華**是官方字根排布设计，采用了字根首笔分区排布模式（类似五笔、真码）。依据字根第一笔的笔画，分布在横竖撇捺折五区中。其中横区 6 键，竖区 5 键，撇区 6 键，捺区 4 键，折区 4 键。方案名取自《尚書大傳》之「日月光華，旦復旦兮」。

由于字根按照首笔笔画进行分区，适合有五笔经验的用户。

![宇浩输入法宋体字根图](/yulight.webp)

两个方案的区别，可参见以下表格。

| 特点                       | 宇浩·光華 | 宇浩·星陈 |
| :------------------------- | :-------- | :-------- |
| 使用最新版本**宇浩拆分**   | ✅         | ✅         |
| 支持到 CJK ext-I           | ✅         | ✅         |
| 兼容台湾字形拆分           | ✅         | ✅         |
| 繁简通打低极选重率 (<0.2%) | ✅         | ✅         |
| 字根双编码                 | ✅         | ✅         |
| 附属根比代表根多补一码     | ✅         | ❌         |
| 大码使用 Z 键              | ❌         | ❌         |
| 小码使用 Z 键              | ❌         | ✅         |
| 相似字形字根同分区聚类     | ✅         | ❌         |
| 相似字形字根同大码聚类     | ❌         | ✅         |
| 小码使用拼音中的字母       | ✅         | ✅         |
| 小码 >85% 使用拼音首字母   | ❌         | ✅         |
| 双手互击率 >60%            | ❌         | ✅         |
| 严格优化键位分布           | ❌         | ✅         |
| Z 键反查                   | ✅         | ✅         |

### 第三方衍生

基于宇浩输入法的拆分，部分用户还创制了其他的**衍生方案**。

#### 吉旦饼

[**吉旦饼**](https://lost-melody.github.io/wafel)，是阿吉、王牌餅乾发起的一项衍生方案。它采用乱序字根设计、三码定长、延迟顶字。「吉旦饼」这个名字，来自三名主要开发人：阿吉，forFudan，王牌餅乾。取义于 華夫餅 (wafel)，其汉语翻译应有「鸡蛋饼」之义。

输入三码后，对应的三码单字不会上屏，而是将此汉字暂留在预选区，等到第七码的时候，才顶出第一字。每输入四码时，进入临时四码模式，可以选择 Tab 上屏对应的四码单字。因此可看作加强版的「五三顶」输入法。

鸡蛋饼不取第三字根，故而拆分起来更加简单，思维压力较小。三码一字，也使得输入的节奏非常舒服。

<!-- 
| 特点                       | 宇浩·星陈 | 吉旦饼                |
| :------------------------- | :-------- | :-------------------- |
| 使用最新版本**宇浩拆分**   | ✅         | ✅                     |
| 支持到 CJK ext-I           | ✅         | （四码模式下）          |
| 兼容台湾字形拆分           | ✅         | ❌                     |
| 字根双编码                 | ✅         | ✅                     |
| 三码方案                   | ❌         | ✅                     |
| 四码方案                   | ✅         | （支持四码加 Tab 键输入） |
| 单字派码长                 | ~3.15     | ~2.65                 |
| 一简二简个数               | ~600      | ~50                   |
| 繁简通打低极选重率 (<0.2%) | ✅         | （四码模式下）          |
| 大码使用 Z 键              | ❌         | ✅                     |
| 小码使用 Z 键              | ✅         | ✅                     |
| 相似字形字根同大码聚类     | ✅         | ❌                     |
| 小码使用拼音中的字母       | ✅         | ❌                     |
| 小码 >85% 使用拼音首字母   | ✅         | ❌                     |
| 双手互击率 >60%            | ✅         | ✅                     |
| 严格优化键位分布           | ✅         | ✅                     |
| Z 键反查                   | ✅         | ❌                     |
 -->

#### 卿雲爛兮

[**卿雲爛兮**](https://zhuyuhao.com/yujoy)，是钱多多发起的一项衍生方案，特点是**乱序、单编、消灭小码**。方案名取自《尚書大傳》之「卿雲爛兮，糺縵縵兮」。取码规则共两条：

1. 依次取第一、二、三、末字根对应的编码；
2. 不足四码时，输入一个补码，即末根读音。

<!-- 
所以，根据字根数量，有以下几种形式。设首根为 A，次根为 B，三根为 C，末根为 Z，读音为 p。

1. 单根字：Zp
2. 双根字：AZp
3. 三根字：ABZp
4. 多根字：ABCZ -->

<!-- 本方案的**补码**，是末根的读音首字母，唯一的例外是高频「口」字根。 -->

<!-- {: .highlight }
卿云取码歌诀  
一二三末取字根　单根成字即自身  
双根便作首和末　三根首二同末存  
字根表中找编码　二十五键莫看岔  
依次填入根字母　不足四码加补码  
补码就是末根音　以下法则心里记  
鱼化ｖ来衣作ｉ　口补ｖ外无特例  

| 末根补码 | 规则                    | 举例                    |
| :------- | :---------------------- | ----------------------- |
| v        | 频率最高的字根，补码为 v | 口                      |
| v        | 读音为 ㄩ 的，补码为 v  | 鱼魚雨禺予 月曰         |
| i        | 读音为 ㄧ 的，补码为 i  | 一乙已乂弋亦衤 言羊用夭 |

字根是有限的，因此本方案依旧是纯形方案，不是形音方案。 -->

由于字根采用乱序设计，卿云同时兼顾了极低的选重率、优秀的手感、和简单的规则。其关键数据如下：

- 简体动态选重率 0.08%
- 繁体动态选重率 0.08%
- 繁简混合动态选重率 0.135%
- 全码速度当量 1.27，简码速度当量 1.28
- 单字平均双手互击率 > 65%，连续文本双手互击率 > 45%

<!-- 以下为本方案的字根图。可能作为末根的生僻部首，图上标注其读音，以供参考： -->

<!-- [![yujoy](../yujoy/image/yujoy.png)](../yujoy/image/yujoy.png) -->

## 数据对比

关于本输入法的相关指标的定义、数据统计、同类型输入法对比，可参见文章 [《常见输入法重码数据》](/docs/statistics)。

## 开发细节

关于本输入法的算法、指标、代码实现，可参见文章 [《宇浩输入法开发技术文档》](/docs/technical)。

::: info 宇浩方案的哲学
宇浩方案的哲学是：**实用**、**直观**、**科学**、**理性**。实用，指的是完全以输入而非检字进行设计；直观，指的是对汉字的拆分直观易懂，不破坏汉字的美感；科学，指的是对于编码和简码的设计科学合理，符合统计频率，使用量化指标而非感性体验；理性，指的是拆字规则逻辑严明、没有二义，也指社群抱着理性和开放的态度去面对批评和建议，积极修正存在矛盾的、不正确的拆分。
:::

## 鸣谢

本输入法的设计制作主要借鉴了三个前辈输入法的优点，在这里向他们的作者表示极大的敬意和感谢。它们包括：

- 郑码的大字根、双编码设计。通过「位码」而非「结构码」来挖掘首根的信息。
- 徐码对于繁简通打的支持，以及小码从拼音字母中选取的特点。使用音托不仅方便记忆，也可以达到更佳的离散。
- 五笔字型字根分区排布、不使用 Z 键的特征。分区排布方便对于字根的记忆，Z 键空出后利于手感，还能用于其他功能，方便各平台通用。

在输入法的制作过程中，不少伙伴提出了大量宝贵的意见和建议，帮助它不断优化进步。特此致以极大的谢意。

- 钱多多为输入法的推广作出大量的努力。还绘制了黑体的字根图、设计了输入法的 Logo 和 Android 上的定制方案。可谓「首席艺术委员」。
- 阿吉始终鼓励作者开发一款新的输入法，他的很多观点和设计哲学同作者不谋而合，也坚定了宇浩输入法讲客观、讲实用的理念。他为输入法的字根规律性和易学性提出了大量建议，使折区字根的排布上了一个台阶。可谓「首席哲学委员」。
- 宋天为输入法的规则的完善提出了大量意见和建议，找出了很多拆分上的不合理之处，尤其是在大字集的拆分上，他的建议至关重要，也使宇浩输入法在常用字集内拆分无二义、规则无矛盾。可谓「首席拆分委员」。
- 王牌饼干不仅设计了非常好用的「宇浩三码顶」方案，还为 RIME 方案编写了优秀的 Lua 代码。可谓「首席技术委员」。

还有不少朋友为输入法的优化提出了宝贵的意见和建议，此处不一一致谢。

::: info 有联为证：
>汉字十万，岂宇浩独收八九？  
>字根两百，因诸君而改二三。
:::

## 脚注

[^frequent_characters]: 「最常用汉字」的定义依赖于文本空间。关于本测评中所用的字频数据的来源，[请参阅此页面](/docs/statistics)。

[^guji_standards]: 中华人民共和国国家标准《古籍印刷通用字规范字形表》（GB/Z 40637-2021）：[https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=52E2DE28D439C1937EE09AE4B5AA615B](https://openstd.samr.gov.cn/bzgk/gb/newGbInfo?hcno=52E2DE28D439C1937EE09AE4B5AA615B)

[^mixed_frequency]: 这里的繁简混合字频来源于简体字频和繁体字频。假设一个人一半时间打简体，一半时间打繁体，那么便适用于此数据。

[^opencc]: 两岸三地三套标准包括：大陆简体、大陆繁體、臺灣正體。另外，宇浩输入法还兼容符合 OpenCC 用字标准的词语。
